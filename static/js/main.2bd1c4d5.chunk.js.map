{"version":3,"sources":["images/spinner.svg","contexts/CurrentUserContext.js","utils/api.js","utils/utils.js","images/logo.svg","components/Header.js","components/Loader.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/FormInput.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeleteCardPopup.js","components/App.js","index.js"],"names":["CurrentUserContext","createContext","_id","name","about","avatar","spinner","api","options","this","_baseUrl","baseUrl","_headers","headers","url","method","body","fetchUrl","JSON","stringify","fetch","then","res","ok","json","Promise","reject","statusCode","status","message","statusText","_fetch","data","card","id","like","authorization","logError","error","console","Header","className","href","target","src","logo","alt","Part","step","speed","delay","color","size","halfSize","width","count","height","transform","x","y","rx","ry","fill","attributeName","values","keyTimes","dur","begin","repeatCount","Loader","props","preserveAspectRatio","rotateStep","delayStep","parts","i","j","push","buildParts","DeleteButton","onClickDelete","type","aria-label","onClick","LikeButton","isLiked","onClickLike","classes","Card","onCardClick","onCardLike","onCardDelete","useState","isLikeFetching","setIsLikeFetching","currentUserId","useContext","isOwner","owner","likes","some","user","link","length","Main","cardList","cards","onAddPlace","onEditAvatar","onEditProfile","loading","map","Footer","ImagePopup","onClose","popupClasses","PopupWithForm","title","isOpen","onSubmit","children","submitting","disabled","buttonText","buttonClasses","noValidate","FormInput","onChange","errorRef","useRef","inputRef","useEffect","current","validity","validationMessage","valid","textContent","value","ref","evt","EditProfilePopup","onUpdateUser","open","currentUser","userName","setUserName","userAbout","setUserAbout","nameValid","setNameValid","aboutValid","setAboutValid","formValid","setFormValid","preventDefault","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","React","AddPlacePopup","setName","setLink","linkValid","setLinkValid","clearForm","placeholder","ConfirmDeleteCardPopup","cardId","onDeleteCard","App","setLoading","formSubmitting","setFormSubmitting","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","setCards","selectedCard","setSelectedCard","deletingCardId","setDeletingCardId","setCurrentUser","closeAllPopups","all","getUserInfo","getCardList","userData","catch","finally","Provider","setLikeFetching","newCard","state","c","updateProfile","newUserData","cardData","clearCallback","postCard","delete","filter","formData","updateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wMAAe,MAA0B,oCCU1BA,EAPYC,wBAAc,CACvCC,IAAK,KACLC,KAAM,sDACNC,MAAO,GACPC,OAAQC,I,cCmDGC,EAAM,I,WAzDjB,WAAYC,GAAU,oBACpBC,KAAKC,SAAWF,EAAQG,QACxBF,KAAKG,SAAWJ,EAAQK,Q,0CAG1B,SAAOC,GAAmC,IAA9BC,EAA6B,uDAApB,MAAOC,EAAa,uDAAN,KAC3BC,EAAQ,UAAMR,KAAKC,SAAX,YAAuBI,GAC/BN,EAAU,CACdO,SACAF,QAASJ,KAAKG,UAOhB,OAJII,IACFR,EAAQQ,KAAOE,KAAKC,UAAUH,IAGzBI,MAAMH,EAAUT,GACpBa,MAAK,SAACC,GACL,OAAKA,EAAIC,GAMFD,EAAIE,OALFC,QAAQC,OAAO,CACpBC,WAAYL,EAAIM,OAChBC,QAASP,EAAIQ,kB,yBAOvB,WACE,OAAOrB,KAAKsB,OAAO,c,yBAGrB,WACE,OAAOtB,KAAKsB,OAAO,W,2BAGrB,SAAcC,GACZ,OAAOvB,KAAKsB,OAAO,WAAY,QAASC,K,sBAG1C,SAASC,GACP,OAAOxB,KAAKsB,OAAO,QAAS,OAAQE,K,oBAGtC,SAAOC,GACL,OAAOzB,KAAKsB,OAAL,gBAAqBG,GAAM,Y,kBAGpC,SAAKA,GAAkB,IAAdC,IAAa,yDACpB,OAAO1B,KAAKsB,OAAL,sBAA2BG,GAAMC,EAAO,MAAQ,Y,0BAGzD,SAAaH,GACX,OAAOvB,KAAKsB,OAAL,kBAA+B,QAASC,O,KAIhC,CAAQ,CACzBrB,QAAS,8CACTE,QAAS,CACPuB,cAAe,uCACf,eAAgB,sBC9Db,SAASC,EAASC,GACvBC,QAAQD,MAAMA,EAAMT,SCDP,UAA0B,iC,OCa1BW,MAVf,WACE,OACE,wBAAQC,UAAU,mBAAlB,SACE,mBAAGC,KAAK,IAAID,UAAU,OAAOE,OAAO,QAApC,SACE,qBAAKC,IAAKC,EAAMC,IAAI,eAAeL,UAAU,mBCLrD,SAASM,EAAT,GAA2D,IAA3CC,EAA0C,EAA1CA,KAAMC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,KACnCC,EAAWD,EAAO,EAClBE,EAASF,EAFyC,EAATG,MAEhB,GACzBC,EAAoB,GAAXH,EAEf,OACE,mBAAGI,UAAS,iBAAYT,EAAZ,YAAoBK,EAApB,YAAgCA,EAAhC,KAAZ,SACE,sBACEK,EAAGL,EAAYC,EAAQ,EACvBK,EAAE,IACFC,GAAG,IACHC,GAAG,IACHP,MAAOA,EACPE,OAAQA,EACRM,KAAMX,EAPR,SASE,yBACEY,cAAc,UACdC,OAAO,MACPC,SAAS,MACTC,IAAG,UAAKjB,EAAL,MACHkB,MAAK,WAAMjB,EAAN,MACLkB,YAAY,mBAmDPC,MA5Cf,SAAgBC,GAAQ,IAAD,EAMjBA,EAJFf,aAFmB,MAEX,GAFW,IAMjBe,EAHFrB,aAHmB,MAGX,IAHW,IAMjBqB,EAFFnB,aAJmB,MAIX,UAJW,IAMjBmB,EADFlB,YALmB,MAKZ,IALY,EA8BrB,OACE,qBAAKX,UAAU,SAAf,SACE,qBACEA,UAAU,cACVa,MAAK,UAAKF,EAAL,MACLI,OAAM,UAAKJ,EAAL,MACNmB,oBAAoB,WAJtB,SAxBe,WAKjB,IAJA,IAAMC,EAAa,IAAMjB,EACnBkB,EAAYxB,EAAQM,EACpBmB,EAAQ,GAELC,EAAI,EAAGC,EAAI3B,EAAO0B,EAAI,IAAKA,GAAKH,EAAYI,GAAKH,EACxDC,EAAMG,KACJ,cAAC9B,EAAD,CAEEC,KAAM2B,EACNzB,MAAO0B,EACP3B,MAAOA,EACPE,MAAOA,EACPC,KAAMA,EACNG,MAAOA,GANFoB,IAWX,OAAOD,EAWFI,QCjET,SAASC,EAAT,GAAwC,IAAjBC,EAAgB,EAAhBA,cACrB,OAAO,wBACLC,KAAK,SACLC,aAAW,6CACXzC,UAAU,mCACV0C,QAASH,IAIb,SAASI,EAAT,GAAoD,IAA/BC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,YAAa/B,EAAQ,EAARA,MACnCgC,EAAO,4BAAwBF,GAAW,wBAEhD,OACE,qCACE,wBACEJ,KAAK,SACLC,aAAW,mDACXzC,UAAW8C,EACXJ,QAASG,IAEX,sBAAM7C,UAAU,iBAAhB,SAAkCc,OAiDzBiC,MA5Cf,YAAgE,IAAhDvD,EAA+C,EAA/CA,KAAMwD,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aAAgB,EACjBC,oBAAS,GADQ,mBACtDC,EADsD,KACtCC,EADsC,KAEjDC,EAAiBC,qBAAWhG,GAAjCE,IAED+F,EAAUhE,EAAKiE,MAAMhG,MAAQ6F,EAC7BV,EAAUpD,EAAKkE,MAAMC,MAAK,SAAAC,GAAI,OAAIA,EAAKnG,MAAQ6F,KAcrD,OACE,oBAAItD,UAAU,mBAAd,SACE,0BAASA,UAAU,OAAnB,UACIwD,GAAW,cAAClB,EAAD,CAAcC,cAPP,WACxBW,EAAa1D,EAAK/B,QAOd,qBACE0C,IAAKX,EAAKqE,KACVxD,IAAKb,EAAK9B,KACVsC,UAAU,cACV0C,QApBgB,WACtBM,EAAYxD,MAqBR,sBAAKQ,UAAU,oBAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BR,EAAK9B,OAClC,qBAAKsC,UAAU,aAAf,SAEIoD,EACI,cAAC,EAAD,CAAQzC,KAAM,GAAID,MAAM,UACxB,cAACiC,EAAD,CAAYE,YAxBJ,WACtBI,EAAWzD,EAAM6D,IAuBuCT,QAASA,EAAS9B,MAAOtB,EAAKkE,MAAMI,oBCSjFC,MApEf,SAAclC,GAAQ,IAaGmC,EAbJ,EACWT,qBAAWhG,GAAlCG,EADY,EACZA,KAAMC,EADM,EACNA,MAAOC,EADD,EACCA,OAElBqG,EAQEpC,EARFoC,MACAhB,EAOEpB,EAPFoB,WACAC,EAMErB,EANFqB,aACAgB,EAKErC,EALFqC,WACAC,EAIEtC,EAJFsC,aACAC,EAGEvC,EAHFuC,cACApB,EAEEnB,EAFFmB,YACAqB,EACExC,EADFwC,QAqBF,OACE,uBAAMrE,UAAU,oBAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,qBAAKA,UAAU,0BAA0B0C,QAASyB,EAAlD,SACE,qBAAKhE,IAAKvC,EAAQyC,IAAI,uCAASL,UAAU,sBAE3C,sBAAKA,UAAU,mBAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,gBAAd,SAA+BtC,IAC/B,wBACE8E,KAAK,SACLC,aAAW,4HACXzC,UAAU,4BACV0C,QAAS0B,OAGb,mBAAGpE,UAAU,iBAAb,SAA+BrC,OAEjC,wBACE6E,KAAK,SACLC,aAAW,mIACXzC,UAAU,wBACV0C,QAASwB,OAIb,yBAASlE,UAAU,QAAnB,SAEIqE,EACI,cAAC,EAAD,KA/CWL,EAgDGC,EA9CtB,oBAAIjE,UAAU,cAAd,SAEIgE,EAASM,KAAI,SAAA9E,GAAI,OACf,cAAC,EAAD,CAEEA,KAAMA,EACNyD,WAAYA,EACZC,aAAcA,EACdF,YAAaA,GAJRxD,EAAK/B,iBCdT8G,MARf,WACE,OACE,wBAAQvE,UAAU,mBAAlB,SACE,mBAAGA,UAAU,oBAAb,uCCWSwE,MAdf,YAAwC,IAAlBhF,EAAiB,EAAjBA,KAAMiF,EAAW,EAAXA,QACpBC,EAAY,iCAA6BlF,EAAO,eAAiB,IAEvE,OACE,qBAAKQ,UAAW0E,EAAhB,SACE,sBAAK1E,UAAU,0CAAf,UACE,wBAAQwC,KAAK,SAASC,aAAW,6CAAUzC,UAAU,kCAAkC0C,QAAS+B,IAChG,qBAAKtE,IAAKX,GAAQA,EAAKqE,KAAMxD,IAAKb,GAAQA,EAAK9B,KAAMsC,UAAU,iBAC/D,oBAAIA,UAAU,cAAd,SAA6BR,GAAQA,EAAK9B,aCuCnCiH,MA9Cf,SAAuB9C,GAAQ,IAE3B+C,EASE/C,EATF+C,MACAlH,EAQEmE,EARFnE,KACAmH,EAOEhD,EAPFgD,OACAJ,EAME5C,EANF4C,QACAK,EAKEjD,EALFiD,SACAC,EAIElD,EAJFkD,SACAC,EAGEnD,EAHFmD,WACAC,EAEEpD,EAFFoD,SAT0B,EAWxBpD,EADFqD,kBAV0B,MAUb,yDAVa,EAYtBR,EAAY,2BAAuBhH,EAAvB,YAA+BmH,GAAU,gBACrDM,EAAa,qBAAiBF,GAAY,uBAEhD,OACE,qBAAKjF,UAAW0E,EAAhB,SACE,sBAAK1E,UAAU,mBAAf,UACE,wBACEwC,KAAK,SACLC,aAAW,6CACXzC,UAAU,kCACV0C,QAAS+B,IAEX,oBAAIzE,UAAU,eAAd,SAA8B4E,IAC9B,uBACElH,KAAI,eAAUA,GACdsC,UAAS,yBAAoBtC,GAC7B0H,YAAU,EACVN,SAAUA,EAJZ,UAMGC,EACD,wBACEvC,KAAK,SACL9E,KAAK,OACLsC,UAAWmF,EACXF,SAAUA,EAJZ,SAMGD,EAAa,cAAC,EAAD,CAAQrE,KAAM,GAAIG,MAAO,GAAIN,MAAO,MAAU0E,a,OCPzDG,MAhCf,SAAmBxD,GAAQ,IAClByD,EAAYzD,EAAZyD,SACDC,EAAWC,mBACXC,EAAWD,mBAiBjB,OAVAE,qBAAU,WAAO,IAAD,EAC0BD,EAASE,QAAzCC,EADM,EACNA,SAAUC,EADJ,EACIA,kBAEdD,EAASE,MACXP,EAASI,QAAQI,YAAc,GAE/BR,EAASI,QAAQI,YAAcF,IAEhC,CAAChE,EAAMmE,QAGR,wBAAOhG,UAAU,cAAjB,UACE,iDACM6B,GADN,IAEEoE,IAAKR,EACLH,SApBe,SAACY,GAAS,IAAD,EACAA,EAAIhG,OAAxB8F,EADoB,EACpBA,MAAOJ,EADa,EACbA,SACfN,EAASU,EAAOJ,EAASE,WAoBvB,sBAAMG,IAAKV,EAAUvF,UAAU,2CCuDtBmG,MA/Ef,YAAwE,IAA5C1B,EAA2C,EAA3CA,QAAS2B,EAAkC,EAAlCA,aAAcC,EAAoB,EAApBA,KAAMrB,EAAc,EAAdA,WACjDsB,EAAc/C,qBAAWhG,GADsC,EAErC4F,mBAASmD,EAAY5I,MAFgB,mBAE9D6I,EAF8D,KAEpDC,EAFoD,OAGnCrD,mBAASmD,EAAY3I,OAHc,mBAG9D8I,EAH8D,KAGnDC,EAHmD,OAInCvD,oBAAS,GAJ0B,mBAI9DwD,EAJ8D,KAInDC,EAJmD,OAKjCzD,oBAAS,GALwB,mBAK9D0D,EAL8D,KAKlDC,EALkD,OAMnC3D,oBAAS,GAN0B,mBAM9D4D,EAN8D,KAMnDC,EANmD,KA2CrE,OAhBAtB,qBAAU,WAENsB,KADEL,IAAaE,MAKhB,CAACF,EAAWE,IAEfnB,qBAAU,WACRc,EAAYF,EAAY5I,MACxBgJ,EAAaJ,EAAY3I,OAEzBiJ,IAAeN,EAAY5I,MAC3BoJ,IAAgBR,EAAY3I,SAC3B,CAAC2I,EAAaD,IAGf,eAAC,EAAD,CACEzB,MAAM,4HACNlH,KAAK,eACLmH,OAAQwB,EACRpB,UAAW8B,EACXtC,QAASA,EACTK,SAhCiB,SAACoB,GACpBA,EAAIe,iBAEJb,EAAa,CACX1I,KAAM6I,EACN5I,MAAO8I,KA4BPzB,WAAYA,EAPd,UASE,cAAC,EAAD,CACExC,KAAK,OACL9E,KAAK,OACL+B,GAAG,aACHO,UAAU,oCACVkH,UAAQ,EACRC,UAAU,IACVC,UAAU,KACVpB,MAAOO,EACPjB,SAtDwB,SAACU,EAAOF,GACpCc,EAAad,GACbU,EAAYR,MAsDV,cAAC,EAAD,CACExD,KAAK,OACL9E,KAAK,QACL+B,GAAG,cACHO,UAAU,qCACVkH,UAAQ,EACRC,UAAU,IACVC,UAAU,MACVpB,MAAOS,EACPnB,SA5DyB,SAACU,EAAOF,GACrCgB,EAAchB,GACdY,EAAaV,UCkBFqB,MAnCf,YAAyE,IAA9ChB,EAA6C,EAA7CA,KAAM5B,EAAuC,EAAvCA,QAAS6C,EAA8B,EAA9BA,eAAgBtC,EAAc,EAAdA,WAClDiB,EAAMsB,IAAM/B,SAUlB,OACE,cAAC,EAAD,CACEZ,MAAM,wFACNlH,KAAK,iBACLmH,OAAQwB,EACR5B,QAASA,EACTK,SAdiB,SAACoB,GACpBA,EAAIe,iBAEJK,EAAe,CACb1J,OAAQqI,EAAIN,QAAQK,SAWpBhB,WAAYA,EANd,SAQE,wBAAOhF,UAAU,cAAjB,UACE,uBACEiG,IAAKA,EACLzD,KAAK,MACL9E,KAAK,SACL+B,GAAG,eACHO,UAAU,oCACVkH,UAAQ,IAEV,sBAAMlH,UAAU,+CCqDTwH,MAjFf,YAAmE,IAA1CnB,EAAyC,EAAzCA,KAAM5B,EAAmC,EAAnCA,QAASP,EAA0B,EAA1BA,WAAYc,EAAc,EAAdA,WAAc,EACxC7B,mBAAS,IAD+B,mBACzDzF,EADyD,KACnD+J,EADmD,OAExCtE,mBAAS,IAF+B,mBAEzDU,EAFyD,KAEnD6D,EAFmD,OAG9BvE,oBAAS,GAHqB,mBAGzDwD,EAHyD,KAG9CC,EAH8C,OAI9BzD,oBAAS,GAJqB,mBAIzDwE,EAJyD,KAI9CC,EAJ8C,OAK9BzE,oBAAS,GALqB,mBAKzD4D,EALyD,KAK9CC,EAL8C,KAyB1Da,EAAY,WAChBJ,EAAQ,IACRC,EAAQ,KAkBV,OATAhC,qBAAU,WAENsB,KADEL,IAAagB,MAKhB,CAAChB,EAAWgB,IAIb,eAAC,EAAD,CACE/C,MAAM,gEACNlH,KAAK,WACLmH,OAAQwB,EACRpB,UAAW8B,EACXtC,QA5CgB,WAClBmC,GAAa,GACbgB,GAAa,GACbH,EAAQ,IACRC,EAAQ,IACRjD,KAwCEK,SAtBiB,SAACoB,GACpBA,EAAIe,iBAEJ/C,EAAW,CAACxG,OAAMmG,QAAOgE,IAoBvB7C,WAAYA,EAPd,UASE,cAAC,EAAD,CACEgB,MAAOtI,EACP4H,SA1CwB,SAACU,EAAOF,GACpCc,EAAad,GACb2B,EAAQzB,IAyCJxD,KAAK,OACL9E,KAAK,OACL+B,GAAG,cACHqI,YAAY,mDACZ9H,UAAU,yCACVkH,UAAQ,EACRC,UAAU,IACVC,UAAU,OAEZ,cAAC,EAAD,CACEpB,MAAOnC,EACPyB,SAjDwB,SAACU,EAAOF,GACpC8B,EAAa9B,GACb4B,EAAQ1B,IAgDJxD,KAAK,MACL9E,KAAK,OACL+B,GAAG,aACHqI,YAAY,qGACZ9H,UAAU,oCACVkH,UAAQ,QCvDDa,MArBf,YAA8E,IAA7CC,EAA4C,EAA5CA,OAAQvD,EAAoC,EAApCA,QAASwD,EAA2B,EAA3BA,aAAcjD,EAAa,EAAbA,WAM9D,OACE,cAAC,EAAD,CACEJ,MAAM,2DACNM,WAAW,eACXxH,KAAK,SACLmH,SAAUmD,EACVvD,QAASA,EACTK,SAZiB,SAACoB,GACpBA,EAAIe,iBACJgB,EAAaD,IAWXhD,WAAYA,EAPd,SASE,uBAAOxC,KAAK,SAASxC,UAAU,kCAAkCtC,KAAK,UC2J7DwK,MAjKf,WAAgB,IAAD,EACiB/E,oBAAS,GAD1B,mBACNkB,EADM,KACG8D,EADH,OAE+BhF,oBAAS,GAFxC,mBAENiF,EAFM,KAEUC,EAFV,OAG6ClF,oBAAS,GAHtD,mBAGNmF,EAHM,KAGiBC,EAHjB,OAI+CpF,oBAAS,GAJxD,mBAINqF,EAJM,KAIkBC,EAJlB,OAKyCtF,oBAAS,GALlD,mBAKNuF,EALM,KAKeC,EALf,OAMaxF,mBAAS,IANtB,mBAMNc,EANM,KAMC2E,EAND,OAO2BzF,mBAAS,MAPpC,mBAON0F,EAPM,KAOQC,EAPR,OAQ+B3F,mBAAS,MARxC,mBAQN4F,EARM,KAQUC,EARV,OASyB7F,mBAASI,qBAAWhG,IAT7C,mBASN+I,EATM,KASO2C,EATP,KA2FPC,EAAiB,WACrBX,GAAyB,GACzBE,GAA0B,GAC1BE,GAAuB,GACvBK,EAAkB,MAClBF,EAAgB,OAoBlB,OAjBApD,qBAAU,WACRyC,GAAW,GAEXnJ,QAAQmK,IAAI,CACVrL,EAAIsL,cACJtL,EAAIuL,gBAEHzK,MAAK,YAA2B,IAAD,mBAAxB0K,EAAwB,KAAdtF,EAAc,KAC9BiF,EAAeK,GACfV,EAAS5E,MAEVuF,MAAM3J,GACN4J,SAAQ,WACPrB,GAAW,QAEd,IAGD,cAAC,EAAmBsB,SAApB,CAA6BzD,MAAOM,EAApC,SACE,sBAAKtG,UAAU,OAAf,UACE,cAAC,EAAD,IACA,cAAC,EAAD,CACEiE,MAAOA,EACPhB,WA3Ce,SAACzD,EAAMkK,GAC5B,IAAM9G,EAAUpD,EAAKkE,MAAMC,MAAK,SAAAC,GAAI,OAAIA,EAAKnG,MAAQ6I,EAAY7I,OAEjEiM,GAAgB,GAChB5L,EAAI4B,KAAKF,EAAK/B,KAAMmF,GACjBhE,MAAK,SAAC+K,GACLf,GAAS,SAACgB,GAAD,OAAWA,EAAMtF,KAAI,SAACuF,GAAD,OAAOA,EAAEpM,MAAQ+B,EAAK/B,IAAMkM,EAAUE,WAErEN,MAAM3J,GACN4J,SAAQ,kBAAME,GAAgB,OAmC3BxG,aApGsB,SAACzD,GAC7BuJ,EAAkBvJ,IAoGZ2E,cA7GuB,WAC7BqE,GAA0B,IA6GpBvE,WA1GoB,WAC1ByE,GAAuB,IA0GjBxE,aAnHsB,WAC5BoE,GAAyB,IAmHnBvF,YApGgB,SAACxD,GACvBsJ,EAAgBtJ,IAoGV6E,QAASA,IAEX,cAAC,EAAD,IACA,cAAC,EAAD,CAAY7E,KAAMqJ,EAAcpE,QAASyE,IACzC,cAAC,EAAD,CACE7C,KAAMmC,EACN/D,QAASyE,EACT9C,aAxGiB,SAACkD,GACxBjB,GAAkB,GAClBvK,EAAIgM,cAAcR,GACf1K,MAAK,SAAAmL,GACJd,EAAec,GACftB,GAA0B,MAE3Bc,MAAM3J,GACN4J,SAAQ,kBAAMnB,GAAkB,OAiG7BrD,WAAYoD,IAEd,cAAC,EAAD,CACE/B,KAAMqC,EACNjE,QAASyE,EACThF,WAxFqB,SAAC8F,EAAUC,GACtC5B,GAAkB,GAClBvK,EAAIoM,SAASF,GACVpL,MAAK,SAAC+K,GACLf,EAAS,CACPe,GADM,mBAEH1F,KAEL0E,GAAuB,GACvBsB,OAEDV,MAAM3J,GACN4J,SAAQ,kBAAMnB,GAAkB,OA6E7BrD,WAAYoD,IAEd,cAAC,EAAD,CACEJ,OAAQe,EACRtE,QAASyE,EACTjB,aA/EuB,SAACxI,GAC9B4I,GAAkB,GAClBvK,EAAIqM,OAAO1K,GACRb,MAAK,WACJgK,GAAS,SAACgB,GAAD,OAAWA,EAAMQ,QAAO,SAACP,GAAD,OAAOA,EAAEpM,MAAQgC,QAClDuJ,EAAkB,SAEnBO,MAAM3J,GACN4J,SAAQ,kBAAMnB,GAAkB,OAwE7BrD,WAAYoD,IAEd,cAAC,EAAD,CACE/B,KAAMiC,EACN7D,QAASyE,EACT5B,eA/GmB,SAAC+C,GAC1BhC,GAAkB,GAClBvK,EAAIwM,aAAaD,GACdzL,MAAK,SAAAmL,GACJd,EAAec,GACfxB,GAAyB,MAE1BgB,MAAM3J,GACN4J,SAAQ,kBAAMnB,GAAkB,OAwG7BrD,WAAYoD,UClKtBmC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.2bd1c4d5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/spinner.c233b9e0.svg\";","import {createContext} from 'react';\r\nimport spinner from '../images/spinner.svg';\r\n\r\nconst CurrentUserContext = createContext({\r\n  _id: null,\r\n  name: 'Загрузка...',\r\n  about: '',\r\n  avatar: spinner,\r\n})\r\n\r\nexport default CurrentUserContext;","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _fetch(url, method = 'GET', body = null) {\r\n    const fetchUrl = `${this._baseUrl}/${url}`;\r\n    const options = {\r\n      method,\r\n      headers: this._headers,\r\n    };\r\n\r\n    if (body) {\r\n      options.body = JSON.stringify(body);\r\n    }\r\n\r\n    return fetch(fetchUrl, options)\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          return Promise.reject({\r\n            statusCode: res.status,\r\n            message: res.statusText,\r\n          });\r\n        }\r\n        return res.json();\r\n      });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._fetch('users/me');\r\n  }\r\n\r\n  getCardList() {\r\n    return this._fetch('cards');\r\n  }\r\n\r\n  updateProfile(data) {\r\n    return this._fetch('users/me', 'PATCH', data);\r\n  }\r\n\r\n  postCard(card) {\r\n    return this._fetch('cards', 'POST', card);\r\n  }\r\n\r\n  delete(id) {\r\n    return this._fetch(`cards/${id}`, 'DELETE');\r\n  }\r\n\r\n  like(id, like = true) {\r\n    return this._fetch(`cards/likes/${id}`, like ? 'PUT' : 'DELETE');\r\n  }\r\n\r\n  updateAvatar(data) {\r\n    return this._fetch(`users/me/avatar`, 'PATCH', data);\r\n  }\r\n}\r\n\r\nexport const api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n  headers: {\r\n    authorization: '52186c90-0ae5-45bb-99b5-e4acaa2b939f',\r\n    'Content-Type': 'application/json',\r\n  },\r\n});","export function logError(error) {\r\n  console.error(error.message)\r\n}","export default __webpack_public_path__ + \"static/media/logo.9efe1e8a.svg\";","import React from 'react';\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className='header container'>\r\n      <a href='/' className='logo' target='_self'>\r\n        <img src={logo} alt='Mesto Russia' className='logo__img' />\r\n      </a>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React  from 'react';\r\n\r\nfunction Part({ step, speed, delay, color, size, count }) {\r\n  const halfSize = size / 2;\r\n  const width = (size / count) * 0.7;\r\n  const height = halfSize * 0.6;\r\n\r\n  return (\r\n    <g transform={`rotate(${step} ${halfSize} ${halfSize})`}>\r\n      <rect\r\n        x={halfSize - (width / 2)}\r\n        y=\"0\"\r\n        rx=\"3\"\r\n        ry=\"7\"\r\n        width={width}\r\n        height={height}\r\n        fill={color}\r\n      >\r\n        <animate\r\n          attributeName=\"opacity\"\r\n          values=\"1;0\"\r\n          keyTimes=\"0;1\"\r\n          dur={`${speed}ms`}\r\n          begin={`-${delay}ms`}\r\n          repeatCount=\"indefinite\"\r\n        />\r\n      </rect>\r\n    </g>\r\n  )\r\n}\r\n\r\nfunction Loader(props) {\r\n  const {\r\n    count = 10,\r\n    speed = 1000,\r\n    color = '#ffffff',\r\n    size = 100\r\n  } = props;\r\n\r\n  const buildParts = () => {\r\n    const rotateStep = 360 / count;\r\n    const delayStep = speed / count;\r\n    const parts = [];\r\n\r\n    for (let i = 0, j = speed; i < 360; i += rotateStep, j -= delayStep) {\r\n      parts.push(\r\n        <Part\r\n          key={i}\r\n          step={i}\r\n          delay={j}\r\n          speed={speed}\r\n          color={color}\r\n          size={size}\r\n          count={count}\r\n        />\r\n      )\r\n    }\r\n\r\n    return parts\r\n  }\r\n\r\n  return (\r\n    <div className=\"loader\">\r\n      <svg\r\n        className=\"loader__svg\"\r\n        width={`${size}px`}\r\n        height={`${size}px`}\r\n        preserveAspectRatio=\"xMidYMid\"\r\n      >\r\n        {buildParts()}\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loader","import React, { useContext, useState } from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport Loader from './Loader';\r\n\r\nfunction DeleteButton({onClickDelete}) {\r\n  return <button\r\n    type='button'\r\n    aria-label='Удалить'\r\n    className='card__delete btn btn_type_delete'\r\n    onClick={onClickDelete}\r\n  />\r\n}\r\n\r\nfunction LikeButton({isLiked, onClickLike, count}) {\r\n  const classes = `btn btn_type_like ${isLiked && 'btn_type_like-active'}`;\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type='button'\r\n        aria-label='Нравится'\r\n        className={classes}\r\n        onClick={onClickLike}\r\n      />\r\n      <span className='card__like-cnt'>{count}</span>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const [isLikeFetching, setIsLikeFetching] = useState(false);\r\n  const {_id: currentUserId} = useContext(CurrentUserContext);\r\n\r\n  const isOwner = card.owner._id === currentUserId;\r\n  const isLiked = card.likes.some(user => user._id === currentUserId);\r\n\r\n  const handleCardClick = () => {\r\n    onCardClick(card);\r\n  };\r\n\r\n  const handleLikeClick = () => {\r\n    onCardLike(card, setIsLikeFetching);\r\n  }\r\n\r\n  const handleDeleteClick = () => {\r\n    onCardDelete(card._id);\r\n  }\r\n\r\n  return (\r\n    <li className='cards__list-item'>\r\n      <article className='card'>\r\n        { isOwner && <DeleteButton onClickDelete={handleDeleteClick} /> }\r\n        <img\r\n          src={card.link}\r\n          alt={card.name}\r\n          className='card__image'\r\n          onClick={handleCardClick}\r\n        />\r\n        <div className='card__description'>\r\n          <h2 className='card__title'>{card.name}</h2>\r\n          <div className='card__like'>\r\n            {\r\n              isLikeFetching\r\n                ? <Loader size={30} color=\"black\" />\r\n                : <LikeButton onClickLike={handleLikeClick} isLiked={isLiked} count={card.likes.length} />\r\n            }\r\n          </div>\r\n        </div>\r\n      </article>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;","import React, { useContext } from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\nimport Loader from './Loader';\r\n\r\nfunction Main(props) {\r\n  const {name, about, avatar} = useContext(CurrentUserContext);\r\n  const {\r\n    cards,\r\n    onCardLike,\r\n    onCardDelete,\r\n    onAddPlace,\r\n    onEditAvatar,\r\n    onEditProfile,\r\n    onCardClick,\r\n    loading\r\n  } = props;\r\n\r\n  const buildCardList = (cardList) => {\r\n    return (\r\n      <ul className='cards__list'>\r\n        {\r\n          cardList.map(card => (\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onCardLike={onCardLike}\r\n              onCardDelete={onCardDelete}\r\n              onCardClick={onCardClick}\r\n            />\r\n          ))\r\n        }\r\n      </ul>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <main className='content container'>\r\n      <section className='profile'>\r\n        <div className='profile__avatar-wrapper' onClick={onEditAvatar}>\r\n          <img src={avatar} alt='Аватар' className='profile__avatar' />\r\n        </div>\r\n        <div className='profile__details'>\r\n          <div className='profile__text'>\r\n            <h1 className='profile__name'>{name}</h1>\r\n            <button\r\n              type='button'\r\n              aria-label='Редактировать профиль'\r\n              className='btn btn_type_edit-profile'\r\n              onClick={onEditProfile}\r\n            />\r\n          </div>\r\n          <p className='profile__about'>{about}</p>\r\n        </div>\r\n        <button\r\n          type='button'\r\n          aria-label='Добавить новую карточку'\r\n          className='btn btn_type_add-card'\r\n          onClick={onAddPlace}\r\n        />\r\n      </section>\r\n\r\n      <section className='cards'>\r\n        {\r\n          loading\r\n            ? <Loader />\r\n            : buildCardList(cards)\r\n        }\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className='footer container'>\r\n      <p className='footer__copyright'>&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  const popupClasses = `popup popup_type_image ${card ? 'popup_opened' : ''}`;\r\n\r\n  return (\r\n    <div className={popupClasses}>\r\n      <div className='popup__container popup__container_image'>\r\n        <button type='button' aria-label='Закрыть' className='popup__close btn btn_type_close' onClick={onClose} />\r\n        <img src={card && card.link} alt={card && card.name} className='popup__image' />\r\n        <h2 className='popup__sign'>{card && card.name}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport Loader from './Loader';\r\n\r\nfunction PopupWithForm(props) {\r\n  const {\r\n    title,\r\n    name,\r\n    isOpen,\r\n    onClose,\r\n    onSubmit,\r\n    children,\r\n    submitting,\r\n    disabled,\r\n    buttonText = 'Сохранить'\r\n  } = props;\r\n  const popupClasses = `popup popup_type_${name} ${isOpen && 'popup_opened'}`;\r\n  const buttonClasses = `form__save ${disabled && 'form__save_disabled'}`;\r\n\r\n  return (\r\n    <div className={popupClasses}>\r\n      <div className='popup__container'>\r\n        <button\r\n          type='button'\r\n          aria-label='Закрыть'\r\n          className='popup__close btn btn_type_close'\r\n          onClick={onClose}\r\n        />\r\n        <h2 className='popup__title'>{title}</h2>\r\n        <form\r\n          name={`form-${name}`}\r\n          className={`form form_type_${name}`}\r\n          noValidate\r\n          onSubmit={onSubmit}\r\n        >\r\n          {children}\r\n          <button\r\n            type='submit'\r\n            name='save'\r\n            className={buttonClasses}\r\n            disabled={disabled}\r\n          >\r\n            {submitting ? <Loader size={30} count={15} speed={700} /> : buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React, { useEffect, useRef } from 'react';\r\n\r\nfunction FormInput(props) {\r\n  const {onChange} = props;\r\n  const errorRef = useRef();\r\n  const inputRef = useRef();\r\n\r\n  const handleChange = (evt) => {\r\n    const { value, validity } = evt.target;\r\n    onChange(value, validity.valid);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const { validity, validationMessage } = inputRef.current;\r\n\r\n    if (validity.valid) {\r\n      errorRef.current.textContent = '';\r\n    } else {\r\n      errorRef.current.textContent = validationMessage;\r\n    }\r\n  }, [props.value])\r\n\r\n  return (\r\n    <label className='form__field'>\r\n      <input\r\n        {...props}\r\n        ref={inputRef}\r\n        onChange={handleChange}\r\n      />\r\n      <span ref={errorRef} className='form__input-error name-input-error' />\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default FormInput;","import React, { useContext, useEffect, useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport FormInput from './FormInput';\r\n\r\nfunction EditProfilePopup({ onClose, onUpdateUser, open, submitting }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [userName, setUserName] = useState(currentUser.name);\r\n  const [userAbout, setUserAbout] = useState(currentUser.about);\r\n  const [nameValid, setNameValid] = useState(true);\r\n  const [aboutValid, setAboutValid] = useState(true);\r\n  const [formValid, setFormValid] = useState(true);\r\n\r\n  const onChangeUserNameInput = (value, valid) => {\r\n    setNameValid(valid);\r\n    setUserName(value);\r\n  }\r\n\r\n  const onChangeUserAboutInput = (value, valid) => {\r\n    setAboutValid(valid);\r\n    setUserAbout(value);\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: userName,\r\n      about: userAbout\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (nameValid && aboutValid) {\r\n      setFormValid(true);\r\n    } else {\r\n      setFormValid(false);\r\n    }\r\n  }, [nameValid, aboutValid]);\r\n\r\n  useEffect(() => {\r\n    setUserName(currentUser.name);\r\n    setUserAbout(currentUser.about);\r\n\r\n    setNameValid(!!currentUser.name);\r\n    setAboutValid(!!currentUser.about);\r\n  }, [currentUser, open]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title='Редактировать профиль'\r\n      name='edit-profile'\r\n      isOpen={open}\r\n      disabled={!formValid}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitting={submitting}\r\n    >\r\n      <FormInput\r\n        type='text'\r\n        name='name'\r\n        id='name-input'\r\n        className='form__input form__input_type_name'\r\n        required\r\n        minLength='2'\r\n        maxLength='40'\r\n        value={userName}\r\n        onChange={onChangeUserNameInput}\r\n      />\r\n      <FormInput\r\n        type='text'\r\n        name='about'\r\n        id='about-input'\r\n        className='form__input form__input_type_about'\r\n        required\r\n        minLength='2'\r\n        maxLength='200'\r\n        value={userAbout}\r\n        onChange={onChangeUserAboutInput}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ open, onClose, onUpdateAvatar, submitting }) {\r\n  const ref = React.useRef();\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: ref.current.value\r\n    })\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title='Обновить аватар'\r\n      name='update-profile'\r\n      isOpen={open}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitting={submitting}\r\n    >\r\n      <label className='form__field'>\r\n        <input\r\n          ref={ref}\r\n          type='url'\r\n          name='avatar'\r\n          id='avatar-input'\r\n          className='form__input form__input_type_link'\r\n          required\r\n        />\r\n        <span className='form__input-error avatar-input-error' />\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React, { useEffect, useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport FormInput from './FormInput';\r\n\r\nfunction AddPlacePopup({ open, onClose, onAddPlace, submitting }) {\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n  const [nameValid, setNameValid] = useState(false);\r\n  const [linkValid, setLinkValid] = useState(false);\r\n  const [formValid, setFormValid] = useState(false);\r\n\r\n  const handleClose = () => {\r\n    setNameValid(false);\r\n    setLinkValid(false);\r\n    setName('');\r\n    setLink('');\r\n    onClose();\r\n  }\r\n\r\n  const handleChangeNameInput = (value, valid) => {\r\n    setNameValid(valid)\r\n    setName(value);\r\n  }\r\n\r\n  const handleChangeLinkInput = (value, valid) => {\r\n    setLinkValid(valid)\r\n    setLink(value);\r\n  }\r\n\r\n  const clearForm = () => {\r\n    setName('');\r\n    setLink('');\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onAddPlace({name, link}, clearForm)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (nameValid && linkValid) {\r\n      setFormValid(true);\r\n    } else {\r\n      setFormValid(false);\r\n    }\r\n  }, [nameValid, linkValid]);\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title='Новое место'\r\n      name='add-card'\r\n      isOpen={open}\r\n      disabled={!formValid}\r\n      onClose={handleClose}\r\n      onSubmit={handleSubmit}\r\n      submitting={submitting}\r\n    >\r\n      <FormInput\r\n        value={name}\r\n        onChange={handleChangeNameInput}\r\n        type='text'\r\n        name='name'\r\n        id='place-input'\r\n        placeholder='Название'\r\n        className='form__input form__input_type_card-name'\r\n        required\r\n        minLength='2'\r\n        maxLength='30'\r\n      />\r\n      <FormInput\r\n        value={link}\r\n        onChange={handleChangeLinkInput}\r\n        type='url'\r\n        name='link'\r\n        id='link-input'\r\n        placeholder='Ссылка на картинку'\r\n        className='form__input form__input_type_link'\r\n        required\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmDeleteCardPopup({cardId, onClose, onDeleteCard, submitting}) {\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    onDeleteCard(cardId)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title='Вы уверены?'\r\n      buttonText='Да'\r\n      name='delete'\r\n      isOpen={!!cardId}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitting={submitting}\r\n    >\r\n      <input type='hidden' className='form__input form__input_type_id' name='id' />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default ConfirmDeleteCardPopup;","import React, { useState, useEffect, useContext } from 'react';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport { api } from '../utils/api';\r\nimport { logError } from '../utils/utils';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmDeleteCardPopup from './ConfirmDeleteCardPopup';\r\n\r\nfunction App() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [formSubmitting, setFormSubmitting] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [cards, setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [deletingCardId, setDeletingCardId] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState(useContext(CurrentUserContext));\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const handleDeleteCardClick = (id) => {\r\n    setDeletingCardId(id);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n  };\r\n\r\n  const handleUpdateUser = (userData) => {\r\n    setFormSubmitting(true);\r\n    api.updateProfile(userData)\r\n      .then(newUserData => {\r\n        setCurrentUser(newUserData);\r\n        setIsEditProfilePopupOpen(false);\r\n      })\r\n      .catch(logError)\r\n      .finally(() => setFormSubmitting(false));\r\n  }\r\n\r\n  const handleUpdateAvatar = (formData) => {\r\n    setFormSubmitting(true);\r\n    api.updateAvatar(formData)\r\n      .then(newUserData => {\r\n        setCurrentUser(newUserData);\r\n        setIsEditAvatarPopupOpen(false);\r\n      })\r\n      .catch(logError)\r\n      .finally(() => setFormSubmitting(false));\r\n  }\r\n\r\n  const handleAddPlaceSubmit = (cardData, clearCallback) => {\r\n    setFormSubmitting(true);\r\n    api.postCard(cardData)\r\n      .then((newCard) => {\r\n        setCards([\r\n          newCard,\r\n          ...cards\r\n        ])\r\n        setIsAddPlacePopupOpen(false);\r\n        clearCallback();\r\n      })\r\n      .catch(logError)\r\n      .finally(() => setFormSubmitting(false));\r\n  }\r\n\r\n  const handleDeleteCardSubmit = (id) => {\r\n    setFormSubmitting(true);\r\n    api.delete(id)\r\n      .then(() => {\r\n        setCards((state) => state.filter((c) => c._id !== id));\r\n        setDeletingCardId(null);\r\n      })\r\n      .catch(logError)\r\n      .finally(() => setFormSubmitting(false))\r\n  }\r\n\r\n  const handleCardLike = (card, setLikeFetching) => {\r\n    const isLiked = card.likes.some(user => user._id === currentUser._id);\r\n\r\n    setLikeFetching(true);\r\n    api.like(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n      })\r\n      .catch(logError)\r\n      .finally(() => setLikeFetching(false));\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setDeletingCardId(null);\r\n    setSelectedCard(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n\r\n    Promise.all([\r\n      api.getUserInfo(),\r\n      api.getCardList()\r\n    ])\r\n      .then(([userData, cardList]) => {\r\n        setCurrentUser(userData);\r\n        setCards(cardList);\r\n      })\r\n      .catch(logError)\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className='page'>\r\n        <Header />\r\n        <Main\r\n          cards={cards}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleDeleteCardClick}\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onCardClick={handleCardClick}\r\n          loading={loading}\r\n        />\r\n        <Footer />\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n        <EditProfilePopup\r\n          open={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          submitting={formSubmitting}\r\n        />\r\n        <AddPlacePopup\r\n          open={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n          submitting={formSubmitting}\r\n        />\r\n        <ConfirmDeleteCardPopup\r\n          cardId={deletingCardId}\r\n          onClose={closeAllPopups}\r\n          onDeleteCard={handleDeleteCardSubmit}\r\n          submitting={formSubmitting}\r\n        />\r\n        <EditAvatarPopup\r\n          open={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          submitting={formSubmitting}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n"],"sourceRoot":""}