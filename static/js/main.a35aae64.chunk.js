(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(4),r=a.n(n),i=(a(11),a(2)),l=a.p+"static/media/logo.9efe1e8a.svg",o=a(0);var u=function(){return Object(o.jsx)("header",{className:"header container",children:Object(o.jsx)("a",{href:"/",className:"logo",target:"_self",children:Object(o.jsx)("img",{src:l,alt:"Mesto Russia",className:"logo__img"})})})};var j=function(e){var t=e.card,a=e.onCardClick;return Object(o.jsx)("li",{className:"cards__list-item",children:Object(o.jsxs)("article",{className:"card",children:[Object(o.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:"card__delete card__delete_hidden btn btn_type_delete"}),Object(o.jsx)("img",{src:t.link,alt:t.name,className:"card__image",onClick:function(){a(t)}}),Object(o.jsxs)("div",{className:"card__description",children:[Object(o.jsx)("h2",{className:"card__title",children:t.name}),Object(o.jsxs)("div",{className:"card__like",children:[Object(o.jsx)("button",{type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",className:"btn btn_type_like"}),Object(o.jsx)("span",{className:"card__like-cnt",children:t.likes.length||""})]})]})]})})},p=a(5),d=a(6),_=new(function(){function e(t){Object(p.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(d.a)(e,[{key:"_fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c="".concat(this._baseUrl,"/").concat(e),s={method:t,headers:this._headers};return a&&(s.body=JSON.stringify(a)),fetch(c,s).then((function(e){return e.ok?e.json():Promise.reject({statusCode:e.status,message:e.statusText})}))}},{key:"getUserInfo",value:function(){return this._fetch("users/me")}},{key:"getCardList",value:function(){return this._fetch("cards")}},{key:"updateProfile",value:function(e){return this._fetch("users/me","PATCH",e)}},{key:"postCard",value:function(e){return this._fetch("cards","POST",e)}},{key:"delete",value:function(e){return this._fetch("cards/".concat(e),"DELETE")}},{key:"like",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._fetch("cards/likes/".concat(e),t?"PUT":"DELETE")}},{key:"updateAvatar",value:function(e){return this._fetch("users/me/avatar","PATCH",e)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-21",headers:{authorization:"52186c90-0ae5-45bb-99b5-e4acaa2b939f","Content-Type":"application/json"}}),b=a.p+"static/media/spinner.c233b9e0.svg";var m=function(){return Object(o.jsx)("div",{className:"loader",children:Object(o.jsx)("img",{src:b,className:"loader__spinner",alt:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"})})};var f=function(e){var t,a=e.onAddPlace,s=e.onEditAvatar,n=e.onEditProfile,r=e.onCardClick,l=Object(c.useState)(!0),u=Object(i.a)(l,2),p=u[0],d=u[1],f=Object(c.useState)("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),h=Object(i.a)(f,2),O=h[0],x=h[1],N=Object(c.useState)(""),v=Object(i.a)(N,2),y=v[0],g=v[1],k=Object(c.useState)(b),C=Object(i.a)(k,2),E=C[0],S=C[1],P=Object(c.useState)([]),L=Object(i.a)(P,2),T=L[0],A=L[1];return Object(c.useEffect)((function(){d(!0),Promise.all([_.getUserInfo(),_.getCardList()]).then((function(e){var t=Object(i.a)(e,2),a=t[0],c=t[1];!function(e){x(e.name),g(e.about),S(e.avatar)}(a),A(c)})).catch((function(e){console.error(e.message)})).finally((function(){d(!1)}))}),[]),Object(o.jsxs)("main",{className:"content container",children:[Object(o.jsxs)("section",{className:"profile",children:[Object(o.jsx)("div",{className:"profile__avatar-wrapper",onClick:s,children:Object(o.jsx)("img",{src:E,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"})}),Object(o.jsxs)("div",{className:"profile__details",children:[Object(o.jsxs)("div",{className:"profile__text",children:[Object(o.jsx)("h1",{className:"profile__name",children:O}),Object(o.jsx)("button",{type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",className:"btn btn_type_edit-profile",onClick:n})]}),Object(o.jsx)("p",{className:"profile__about",children:y})]}),Object(o.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",className:"btn btn_type_add-card",onClick:a})]}),Object(o.jsx)("section",{className:"cards",children:p?Object(o.jsx)(m,{}):(t=T,Object(o.jsx)("ul",{className:"cards__list",children:t.map((function(e){return Object(o.jsx)(j,{card:e,onCardClick:r},e._id)}))}))})]})};var h=function(){return Object(o.jsx)("footer",{className:"footer container",children:Object(o.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})};var O=function(e){var t=e.title,a=e.name,c=e.isOpen,s=e.onClose,n=e.children,r="popup popup_type_".concat(a," ").concat(c&&"popup_opened");return Object(o.jsx)("div",{className:r,children:Object(o.jsxs)("div",{className:"popup__container",children:[Object(o.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close btn btn_type_close",onClick:s}),Object(o.jsx)("h2",{className:"popup__title",children:t}),Object(o.jsxs)("form",{name:"form-".concat(a),className:"form form_type_".concat(a),noValidate:!0,children:[n,Object(o.jsx)("button",{type:"submit",name:"save",className:"form__save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})};var x=function(e){var t=e.card,a=e.onClose,c="popup popup_type_image ".concat(t?"popup_opened":"");return Object(o.jsx)("div",{className:c,children:Object(o.jsxs)("div",{className:"popup__container popup__container_image",children:[Object(o.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close btn btn_type_close",onClick:a}),Object(o.jsx)("img",{src:t&&t.link,alt:t&&t.name,className:"popup__image"}),Object(o.jsx)("h2",{className:"popup__sign",children:t&&t.name})]})})};var N=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),r=Object(i.a)(n,2),l=r[0],j=r[1],p=Object(c.useState)(!1),d=Object(i.a)(p,2),_=d[0],b=d[1],m=Object(c.useState)(null),N=Object(i.a)(m,2),v=N[0],y=N[1],g=function(){s(!1),j(!1),b(!1),y(null)};return Object(o.jsxs)("div",{className:"page",children:[Object(o.jsx)(u,{}),Object(o.jsx)(f,{onEditProfile:function(){j(!0)},onAddPlace:function(){b(!0)},onEditAvatar:function(){s(!0)},onCardClick:function(e){y(e)}}),Object(o.jsx)(h,{}),Object(o.jsxs)(O,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",isOpen:l,onClose:g,children:[Object(o.jsxs)("label",{className:"form__field",children:[Object(o.jsx)("input",{type:"text",name:"name",id:"name-input",className:"form__input form__input_type_name",required:!0,minLength:"2",maxLength:"40"}),Object(o.jsx)("span",{className:"form__input-error name-input-error"})]}),Object(o.jsxs)("label",{className:"form__field",children:[Object(o.jsx)("input",{type:"text",name:"about",id:"about-input",className:"form__input form__input_type_about",required:!0,minLength:"2",maxLength:"200"}),Object(o.jsx)("span",{className:"form__input-error about-input-error"})]})]}),Object(o.jsxs)(O,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:_,onClose:g,children:[Object(o.jsxs)("label",{className:"form__field",children:[Object(o.jsx)("input",{type:"text",name:"name",id:"place-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"form__input form__input_type_card-name",required:!0,minLength:"2",maxLength:"30"}),Object(o.jsx)("span",{className:"form__input-error place-input-error"})]}),Object(o.jsxs)("label",{className:"form__field",children:[Object(o.jsx)("input",{type:"url",name:"link",id:"link-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"form__input form__input_type_link",required:!0}),Object(o.jsx)("span",{className:"form__input-error link-input-error"})]})]}),Object(o.jsx)(x,{card:v,onClose:g}),Object(o.jsx)(O,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"delete",children:Object(o.jsx)("input",{type:"hidden",className:"form__input form__input_type_id",name:"id"})}),Object(o.jsx)(O,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"update-profile",isOpen:a,onClose:g,children:Object(o.jsxs)("label",{className:"form__field",children:[Object(o.jsx)("input",{type:"url",name:"avatar",id:"avatar-input",className:"form__input form__input_type_link",required:!0}),Object(o.jsx)("span",{className:"form__input-error avatar-input-error"})]})})]})};r.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(N,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.a35aae64.chunk.js.map